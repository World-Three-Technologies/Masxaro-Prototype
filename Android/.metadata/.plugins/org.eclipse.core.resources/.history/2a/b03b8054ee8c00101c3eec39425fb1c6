package com.android.W3T.app;

import android.app.TabActivity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.LinearLayout;
import android.widget.Spinner;
import android.widget.TabHost;
import android.widget.TextView;
import android.widget.AdapterView.OnItemSelectedListener;

public class AppTabs extends TabActivity {
	private TabHost app_tabs_host;
	private Spinner sort_spinner;
	private BaseAdapter sort_ba;
	private Spinner receipt_list_spinner;
	private BaseAdapter receipt_list_ba;
	
	int[] sort_type = {R.string.id, R.string.store_name, R.string.date};
	
	public void onCreate(Bundle savedInstanceState) {
		String user_tab = getResources().getString(R.string.user_info);
		String receipt_tab = getResources().getString(R.string.receipt_info);
		super.onCreate(savedInstanceState);
		/* Set the TabHost */
		// Get the TabHost where to place tabs from the TabActivity
		app_tabs_host = this.getTabHost();
		
		LayoutInflater.from(this).inflate(R.layout.app_tabs, 
				app_tabs_host.getTabContentView(), true);
		
		app_tabs_host.addTab(app_tabs_host.newTabSpec(user_tab)
				.setIndicator(user_tab).setContent(R.id.user_info_tab));
		app_tabs_host.addTab(app_tabs_host.newTabSpec(receipt_tab)
				.setIndicator(receipt_tab).setContent(R.id.receipt_info_tab));
		
		/* Set sort spinner in receipt tab */
		sort_spinner = (Spinner)this.findViewById(R.id.receipt_sort_type_spinner);
		sort_ba = new BaseAdapter() {
			@Override
			public int getCount() {return 3;}	// sort by ID, Date and Store name.
			@Override
			public Object getItem(int arg0) {return null;}
			@Override
			public long getItemId(int arg0) {return 0;}
			@Override
			public View getView(int arg0, View arg1, ViewGroup arg2) {
				LinearLayout ll = new LinearLayout(AppTabs.this);
				ll.setOrientation(LinearLayout.VERTICAL);
				TextView tv = new TextView(AppTabs.this);
				tv.setText(getResources().getText(sort_type[arg0]));
				ll.addView(tv);
				return ll;
			}
		};
		sort_spinner.setAdapter(sort_ba);
		
		sort_spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

			public void onItemSelected(AdapterView<?> parent, View view,
			int position, long id) { }

			public void onNothingSelected(AdapterView<?> parent) { }
			});
	}
}
